@model Employee

<div class="card card-dark bg-dark border-black">
	<div class="card-body text-light">
		<div class="display-6">@Localizer["UpdateEmployee"]</div>
		<form method="post" asp-action="Update">
			<div class="row">
				<div class="col">
					<input type="hidden" asp-for="EmployeeId" />
					<input type="hidden" asp-for="IdentityUserId" /> @* ToDo *@
					<div class="form-group">
						<label asp-for="EmployeeName">@Localizer["Name"]</label>
						<input asp-for="EmployeeName" class="form-control" type="text" />
						<span asp-validation-for="EmployeeName" class="text-danger"></span>
					</div>
					<div class="form-group">
						<label asp-for="EmployeeSurname">@Localizer["Surname"]</label>
						<input asp-for="EmployeeSurname" class="form-control" type="text" />
						<span asp-validation-for="EmployeeSurname" class="text-danger"></span>
					</div>
					<div class="form-group">
						<label asp-for="BranchId">@Localizer["Branch"]</label>
						<select asp-for="BranchId" class="form-select">
							<option selected hidden value="">@Localizer["SelectBranch"]</option>
							@foreach (var branch in ViewBag.AllBranches)
							{
								var selected = Model?.Branch?.BranchId == branch.Id ? "true" : "false";
								<option value=@branch.Id selected="@selected">@branch.Name</option>
							}
						</select>
						<span asp-validation-for="BranchId" class="text-danger"></span>
					</div>
					<div class="form-group my-3">
						<div class="form-check form-switch">
							<input asp-for="CanTakeClients" class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked" checked="@Model.CanTakeClients">
							<label asp-for="CanTakeClients" class="form-check-label" for="flexSwitchCheckChecked">@Localizer["CanTakeClients"]</label>
						</div>
					</div>
					<div class="form-group">
						<label asp-for="DayOff">@Localizer["DayOff"]</label>
						<select asp-for="DayOff" class="form-select">
							<option value="">@Localizer["SelectDayOff"]</option>
							@foreach (var day in Enum.GetValues(typeof(DayOfWeek)))
							{
								<option value="@day">@Localizer[day.ToString()]</option>
							}
						</select>
						<span asp-validation-for="DayOff" class="text-danger"></span>
					</div>
					<div class="form-group">
						<label asp-for="StartOfWorkingHours">@Localizer["StartWorkingTime"]</label>
						<input asp-for="StartOfWorkingHours" class="form-control" type="time" />
						<span asp-validation-for="StartOfWorkingHours" class="text-danger"></span>
					</div>
					<div class="form-group">
						<label asp-for="EndOfWorkingHours">@Localizer["EndWorkingTime"]</label>
						<input asp-for="EndOfWorkingHours" class="form-control" type="time" />
						<span asp-validation-for="EndOfWorkingHours" class="text-danger"></span>
					</div>
				</div>
				<div class="col">
					<div class="form-group">
						<p>@Localizer["OfferedServices"]</p>

						@{
							var allOfferedServices = (IEnumerable<OfferedService>)ViewBag.AllOfferedServices;
						}
						<div class="card-body text-light table-responsive">
							<table id="OfferedServicesTable" class="table table-dark table-hover table-striped align-middle">
								<thead>
									<tr>
										<th class="text-center">@Localizer["CanProvideService"]</th>
										<th>@Localizer["Name"]</th>
										<th class="text-center">@Localizer["Genders"]</th>
										<th class="text-end pe-5">@Localizer["ApproximateDuration(Minutes)"]</th>
										<th>@Localizer["AgeGroups"]</th>
									</tr>
								</thead>
								<tbody>
									@foreach (var offeredServices in allOfferedServices)
									{
										var isChecked = Model.OfferedServices.Any(hs => hs.OfferedServiceId == offeredServices.OfferedServiceId);
										<tr>
											<td>

												<div class="form-check d-flex justify-content-center align-items-center">
													<input class="form-check-input" type="checkbox" name="offeredServicesIds" value="@offeredServices.OfferedServiceId" id="offeredServices-@offeredServices.OfferedServiceId" @(isChecked ? "checked" : "")>
												</div>
											</td>
											<td>@offeredServices.OfferedServiceName</td>
											<td class="text-center align-content-center">
												<div class="form-check form-check-inline">
													<input class="form-check-input" type="checkbox" value="" id="flexCheckCheckedDisabled" checked="@offeredServices.Genders.Contains(Entities.Models.Enums.Gender.m)" disabled>
													<label class="form-check-label" for="flexCheckCheckedDisabled">
														<i class="bi bi-gender-male	"></i>
														@Localizer["Male"]
													</label>
												</div>
												<div class="form-check form-check-inline">
													<input class="form-check-input" type="checkbox" value="" id="flexCheckCheckedDisabled" checked="@offeredServices.Genders.Contains(Entities.Models.Enums.Gender.f)" disabled>
													<label class="form-check-label" for="flexCheckCheckedDisabled">
														<i class="bi bi-gender-female"></i>
														@Localizer["Female"]
													</label>
												</div>
											</td>
											<td class="text-end pe-5">@offeredServices.ApproximateDuration.TotalMinutes</td>
											<td>
												<div class="vstack gap-1">
													@foreach (var ageGroup in @offeredServices.AgeGroups)
													{
														<div class="p-2 text-center rounded-4 border border-success border-opacity-25 col-form-label-sm">
															@*@ageGroup.Name*@...:::!!!FIX HERE!!!:::...
														</div>
													}
												</div>
											</td>
										</tr>
									}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
			<div class="text-danger" asp-validation-summary="All"></div>
			<button type="submit" class="btn btn-primary my-3">
				<i class="fa-solid fa-file-pen"></i>
				@Localizer["SaveChanges"]
			</button>
		</form>
	</div>
</div>