@model IEnumerable<CustomerAppointment>

@{
	var cultureInfo = new CultureInfo("tr-TR");
	var numberFormat = (NumberFormatInfo)cultureInfo.NumberFormat.Clone();
	numberFormat.CurrencyPositivePattern = 3; // 3 means symbol after the number with a space
	numberFormat.CurrencyNegativePattern = 8; // 8 means symbol after the number with a space and negative sign before the number
	cultureInfo.NumberFormat = numberFormat;

	CultureInfo.CurrentCulture = cultureInfo;
	CultureInfo.CurrentUICulture = cultureInfo;
}

<div class="card card-dark bg-dark border-black" data-bs-theme="dark" ">
	<div class="display-6 text-light">@Localizer["CustomerAppointments"]</div>
	<div class="d-flex justify-content-end">
		<a asp-action="Create" class="btn btn-success">
			<i class="bi bi-plus-lg"></i>
@Localizer["Create"]
		</a>
	</div>
	<div class="card-body text-light table-responsive">
		<table id="customerAppointmentsTable" class="table table-dark table-hover table-striped align-middle">
			<thead>
				<tr>
					<th class="text-center">@Localizer["Id"]</th>
					<th>@Localizer["Customer"]</th>
					<th>@Localizer["OfferedServices"]</th>
					<th class="text-center">@Localizer["Gender"]</th>
					<th class="text-center">@Localizer["AgeGroup"]</th>
					<th>@Localizer["Employee"]</th>
					<th>@Localizer["ApproximateDuration"]</th>
					<th class="pe-5 text-end">@Localizer["Price"]</th>
					<th>@Localizer["DateTime"]</th>
					<th>@Localizer["PhoneNumber"]</th>
					<th>@Localizer["EMail"]</th>
					<th>@Localizer["CreatedBy"]</th>
					<th>@Localizer["Operations"]</th>
				</tr>
			</thead>
			<tbody>
@foreach (var customerAppointment in Model)
{
					<tr>
						<td class="text-center">@customerAppointment.CustomerAppointmentId</td>
						<td>@customerAppointment.Name @customerAppointment.Surname</td>
						<td>
			@foreach (var offeredService in @customerAppointment.OfferedServices)
			{
								<div class="p-2 text-center rounded-4 border border-success border-opacity-25 col-form-label-sm">
					@offeredService.OfferedServiceName
								</div>
			}
						</td>
						<td class="text-center">
			@if (@customerAppointment.Gender == Entities.Models.Enums.Gender.m)
			{
								<i class="bi bi-gender-male"></i>
				@Localizer["Male"]
			}
			else
			{
								<i class="bi bi-gender-female"></i>
				@Localizer["Female"]
			}
						</td>
						<td class="text-center">@*@customerAppointment.AgeGroup.Name@**@...:::!!!FIX HERE!!!:::...</td>
						<td>@customerAppointment.Employee.EmployeeName @customerAppointment.Employee.EmployeeSurname</td>
						<td>@customerAppointment.ApproximateDuration</td>
						<td class="pe-5 text-end">@customerAppointment.Price.ToString("C", cultureInfo)</td>
						<td>@customerAppointment.StartDateTime</td>
						<td>@customerAppointment.PhoneNumber</td>
						<td>@customerAppointment.EMail</td>
						<td>@customerAppointment.CreatedBy</td>
						<td class="text-center">
							<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#fastApproveModal">
								<i class="bi bi-hand-thumbs-up"></i>
				@Localizer["FastApprove"]
							</button>
							<div class="modal fade" data-bs-theme="dark" id="fastApproveModal" tabindex="-1" aria-hidden="true">
								<div class="modal-dialog modal-sm modal-dialog-centered">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5" id="exampleModalLabel">@Localizer["ApproveAppointment"]</h1>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">
							@Localizer["WouldYouLikeToApproveThisAppointment?"]
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">@Localizer["Close"]</button>
											<a asp-action="FastApprove" asp-route-id="@customerAppointment.CustomerAppointmentId" class="btn btn-success">
												<i class="bi bi-check2-square"></i>
								@Localizer["Approve"]
											</a>
										</div>
									</div>
								</div>
							</div>
							<a asp-action="Update" asp-route-id="@customerAppointment.CustomerAppointmentId" class="btn btn-warning">
								<i class="fa-solid fa-pen-to-square"></i>
				@Localizer["Update"]
							</a>
							<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#fastCancelModal">
								<i class="bi bi-x-octagon"></i>
				@Localizer["FastCancel"]
							</button>
							<div class="modal fade" data-bs-theme="dark" id="fastCancelModal" tabindex="-1" aria-hidden="true">
								<div class="modal-dialog modal-sm modal-dialog-centered">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5" id="exampleModalLabel">@Localizer["CancelAppointment"]</h1>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">
							@Localizer["WouldYouLikeToCancelThisAppointment?"]
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">@Localizer["Close"]</button>
											<a asp-action="Cancel" asp-route-id="@customerAppointment.CustomerAppointmentId" class="btn btn-success">
												<i class="bi bi-trash3"></i>
								@Localizer["Cancel"]
											</a>
										</div>
									</div>
								</div>
							</div>
						</td>
					</tr>
}
			</tbody>
		</table>
	</div>
</div>
@section Scripts {
	<script>
		$(document).ready(function () {
			$('#customerAppointmentsTable').DataTable({
				columnDefs: [ {
					"orderable": false,
					"targets": [ 12 ]
				} ],
				responsive: true,
				paging: true,
				searching: true,
				ordering: true,
				lengthChange: true,
				language: {
					search: "@Localizer["Search"] : ",
					lengthMenu: "@Localizer["Show _MENU_ entries"]",
					info: "@Localizer["Showing _START_ to _END_ of _TOTAL_ entries"]",
					paginate: {
						previous: "@Localizer["Previous"]",
						next: "@Localizer["Next"]"
					}
				}
			});
		});
	</script>
}
